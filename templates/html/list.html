<!-- templates/users/notifications.html -->
<div class="bg-white rounded-lg shadow p-6">
    <h2 class="text-xl font-bold mb-4">ðŸ”” Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</h2>

    {% if notifications %}
        <ul class="space-y-4">
            {% for notif in notifications %}
            <li class="border-b pb-2 {% if not notif.is_read %}bg-gray-100{% endif %}">
                <div class="flex justify-between items-center">
                    <span class="font-medium">{{ notif.title }}</span>
                    <span class="text-sm text-gray-500">{{ notif.created_at|date:"H:i d-m-Y" }}</span>
                </div>
                <p class="text-gray-700">{{ notif.message }}</p>
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>
    {% endif %}
</div>

<script>
    // âœ… Ø·Ù„Ø¨ Ø¥Ø°Ù† Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­
    document.addEventListener("DOMContentLoaded", () => {
        if ("Notification" in window) {
            if (Notification.permission !== "granted" && Notification.permission !== "denied") {
                Notification.requestPermission();
            }
        }
    });

    // âœ… Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ
    function showNotification(title, message) {
        if ("Notification" in window && Notification.permission === "granted") {
            new Notification(title, {
                body: message,
                icon: "/static/images/bell.png" // Ø¶Ø¹ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…Ø®ØµØµØ© Ù‡Ù†Ø§
            });
        }
    }

    // âœ… Ù…Ø«Ø§Ù„: Ù…Ø­Ø§ÙƒØ§Ø© ÙˆØµÙˆÙ„ ØªÙ†Ø¨ÙŠÙ‡ Ø¬Ø¯ÙŠØ¯ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
    setTimeout(() => {
        showNotification("ðŸ“Œ Ø®Ø·Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©", "Ø­Ø§Ù† ÙˆÙ‚Øª Ù…Ø±Ø§Ø¬Ø¹Ø© Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© Ø§Ù„ÙŠÙˆÙ…!");
    }, 5000);
</script>
